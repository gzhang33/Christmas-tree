/**
 * 粒子标题配置文件
 * 
 * "Merry Christmas" 粒子标题组件的集中配置
 * 控制字体、颜色、尺寸、动画和视觉效果
 */

// 圣诞主题颜色调色板 - 仅包含红、绿、金、白四种圣诞元素颜色
// 用途：定义粒子的颜色范围，确保视觉风格符合圣诞主题
// 影响：每个粒子会随机选择这些颜色之一，颜色越多视觉越丰富
export const TITLE_COLORS = [
    '#C41E3A', // 主红色 - Cardinal Red
    '#DC143C', // 深红色 - Crimson Red
    '#228B22', // 森林绿 - Forest Green
    '#006400', // 深绿色 - Dark Green
    '#FFD700', // 金色 - Gold
    '#FFFFFF', // 白色 - White
] as const;

export const TITLE_CONFIG = {
    // ========== 字体配置 ==========
    font: {
        // 字体族名称
        // 用途：定义标题使用的字体样式
        // 影响：改变文字的视觉风格，需确保字体已在 index.html 中加载
        // Font family with fallbacks
        // Use 'Merry Christmas Flake' strictly for canvas sampling to match the loaded font file.
        // For DOM text elements, use proper fallback stack.
        // Here we define the primary font for sampling.
        family: 'Merry Christmas Flake',
        fallback: "'Merry Christmas Flake', 'Great Vibes', serif",

        // 字体大小（像素）
        // 用途：控制标题文字的尺寸
        // 影响：值越大标题越大，同时会影响粒子总数和画布尺寸
        size: {
            compact: 75,  // 紧凑模式（小屏幕）
            normal: 90,   // 正常模式（大屏幕）
        },

        // Font loading delay (ms)
        loadDelay: 150,
    },

    // ========== 文本内容配置 ==========
    text: {
        line1: 'Merry',
        line2: 'Christmas',

        // 第二行缩进距离（像素）
        // 用途：控制第二行文字相对第一行的水平偏移
        // 影响：值越大第二行越靠右，创造视觉层次感
        line2Indent: {
            compact: 20,  // 紧凑模式缩进
            normal: 40,   // 正常模式缩进
        },

        // 行间距倍数
        // 用途：控制两行文字之间的垂直间距
        // 影响：值越大行距越大，总高度增加（实际间距 = fontSize * lineSpacing）
        lineSpacing: 1.1,
    },

    // ========== 粒子采样配置 ==========
    sampling: {
        // 像素采样密度
        // 用途：控制从文字图像中采样粒子的频率
        // 影响：1=每像素采样（粒子最多），2=每2像素采样（粒子减半），值越大粒子越少，性能越好
        density: 3,  // 增加密度值减少粒子数量，提升性能

        // 画布宽度（像素）
        // 用途：定义渲染画布的宽度
        // 影响：需要足够宽以容纳文字，过小会截断文字
        canvasWidth: {
            compact: 500,  // 紧凑模式画布宽度
            normal: 700,   // 正常模式画布宽度
        },

        // 画布高度填充倍数
        // 用途：计算文字渲染区域的高度
        // 影响：实际高度 = fontSize * canvasPadding，确保文字不被裁剪
        canvasPadding: 1.5,

        // 总画布高度倍数
        // 用途：计算最终显示画布的总高度
        // 影响：总高度 = fontSize * canvasHeightMultiplier，需要容纳两行文字和动画空间
        canvasHeightMultiplier: 2.8,
    },

    // ========== 粒子属性配置 ==========
    particle: {
        // 粒子最小尺寸（像素）
        // 用途：定义粒子的最小半径
        // 影响：值越大粒子越明显，增大尺寸提升清晰度
        sizeMin: 1.2,

        // 粒子最大尺寸（像素）
        // 用途：定义粒子的最大半径
        // 影响：实际尺寸在 sizeMin 到 sizeMax 之间随机
        sizeMax: 2.0,

        // 绘制时最小尺寸（像素）
        // 用途：确保粒子在绘制时不会太小而看不见
        // 影响：增大此值使粒子更清晰锐利
        sizeMinDraw: 1.2,

        // 背景发光层尺寸倍数
        // 用途：控制粒子背景发光效果的大小
        // 影响：降低此值减少模糊感
        glowLayerSizeMultiplier: 1.1,

        // 背景发光层透明度（0-1）
        // 用途：控制背景发光层的不透明度
        // 影响：降低此值减少模糊，提升清晰度
        glowLayerAlpha: 0.15,
    },

    // ========== 动画参数配置 ==========
    // 注意：呼吸、摇摆等基础动画参数直接引用 PARTICLE_CONFIG.animation
    // 这里只定义标题特有的参数
    animation: {
        // --- 2D 画布缩放系数 ---
        // 用途：将 3D 树的动画幅度转换为 2D 画布的像素值

        // 呼吸幅度1缩放系数
        // 影响：值越大呼吸幅度越大，粒子移动范围越广
        breatheAmp1Scale: 15,

        // 呼吸幅度2缩放系数
        // 影响：与 breatheAmp1Scale 配合创造多层次呼吸效果
        breatheAmp2Scale: 15,

        // 摇摆幅度缩放系数
        // 影响：值越大摇摆范围越大
        swayAmpScale: 8,

        // --- 闪烁动画（标题特有） ---

        // 闪烁频率（Hz）
        // 用途：控制粒子透明度闪烁的速度
        // 影响：值越大闪烁越快，创造星光闪烁效果
        twinkleFreq: 3,

        // 闪烁幅度（0-1）
        // 用途：控制透明度变化的范围
        // 影响：值越大明暗对比越强
        twinkleAmp: 0.2,

        // 闪烁基准值（0-1）
        // 用途：设置透明度的基准线
        // 影响：实际透明度 = twinkleBase ± twinkleAmp
        twinkleBase: 0.9,

        // 尺寸脉冲频率（Hz）
        // 用途：控制粒子尺寸变化的速度
        // 影响：值越大尺寸变化越快，创造呼吸感
        sizeFreq: 2,

        // 尺寸脉冲幅度（比例）
        // 用途：控制尺寸变化的范围
        // 影响：值越大尺寸变化越明显
        sizeAmp: 0.1,

        // --- 消散动画参数 ---
        // 注意：这些参数与 shader 保持一致，匹配树的消散效果

        // 向上推力（像素/秒²）
        // 用途：控制粒子向上飘散的加速度
        // 影响：值越大粒子上升越快，匹配 shader 中的 vec3(0.0, 15.0, 0.0)
        upwardForce: 200,

        // 漂移幅度（像素）
        // 用途：控制粒子左右漂移的最大距离
        // 影响：值越大粒子横向漂移越远，创造湍流效果
        driftAmplitude: 60,

        // 进度缩放系数
        // 用途：调整全局动画进度的速度
        // 影响：值越大动画触发越早，匹配 shader 中的 uProgress * 2.6
        progressScale: 2.6,

        // 侵蚀噪声权重
        // 用途：控制随机噪声对粒子消散时机的影响
        // 影响：值越大粒子消散时机越随机，创造不均匀的侵蚀效果
        erosionNoiseWeight: 0.3,

        // 高度延迟权重
        // 用途：控制粒子高度对消散时机的影响
        // 影响：值越大高度差异越明显（顶部先消散，底部后消散）
        heightDelayWeight: 1.0,

        // 第二行延迟偏移（0-1）
        // 用途：让第二行文字比第一行晚开始消散
        // 影响：值越大第二行延迟越久，创造层次感
        line2DelayOffset: 0.3,

        // 第二行延迟缩放（0-1）
        // 用途：调整第二行内部的消散速度差异
        // 影响：值越小第二行粒子消散越同步
        line2DelayScale: 0.7,

        // 淡出开始点（0-1）
        // 用途：定义粒子开始淡出的动画进度
        // 影响：值越小越早开始淡出
        fadeStart: 0.3,

        // 淡出结束点（0-1）
        // 用途：定义粒子完全消失的动画进度
        // 影响：fadeEnd - fadeStart 越大淡出越平缓
        fadeEnd: 0.85,

        // 增长阶段结束点（0-1）
        // 用途：定义粒子尺寸增长阶段的结束时机
        // 影响：值越小增长阶段越短，之后开始收缩
        growPhaseEnd: 0.3,

        // 增长量（比例）
        // 用途：控制粒子尺寸增长的最大幅度
        // 影响：值越大粒子膨胀越明显
        growAmount: 0.3,

        // 收缩量（比例）
        // 用途：控制粒子尺寸收缩的最大幅度
        // 影响：值越大粒子最终越小
        shrinkAmount: 0.6,

        // 噪声时间缩放
        // 用途：控制湍流噪声的时间演化速度
        // 影响：值越大漂移变化越快
        noiseTimeScale: 0.5,

        // Y轴噪声频率
        // 用途：控制基于Y坐标的噪声密度
        // 影响：值越大垂直方向的漂移变化越频繁
        noiseYFreq: 0.5,

        // X轴噪声频率
        // 用途：控制基于X坐标的噪声密度
        // 影响：值越大水平方向的漂移变化越频繁
        noiseXFreq: 0.3,

        // X轴噪声时间缩放
        // 用途：控制X轴噪声的时间演化速度
        // 影响：值越大X方向漂移变化越快
        noiseXTimeScale: 0.8,

        // Y轴漂移缩放
        // 用途：控制Y方向漂移相对X方向的比例
        // 影响：值越小Y方向漂移越弱，粒子更多横向移动
        noiseDriftYScale: 0.3,
    },

    // ========== 视觉效果配置 ==========
    effects: {
        // 阴影模糊半径（像素）
        // 用途：控制粒子周围发光的模糊程度
        // 影响：降低此值减少模糊，提升文字锐度
        shadowBlur: 4,

        // CSS 滤镜 - 多层阴影效果
        // 用途：为整个画布添加多色发光效果
        // 影响：降低模糊值和透明度减少整体模糊感
        dropShadow: {
            // 红色发光层
            red: {
                blur: 6,                           // 降低模糊半径
                color: 'rgba(220, 20, 60, 0.5)',   // 降低透明度
            },
            // 绿色发光层
            green: {
                blur: 4,                           // 降低模糊
                color: 'rgba(34, 139, 34, 0.4)',   // 降低透明度
            },
            // 金色发光层
            gold: {
                blur: 3,                           // 降低模糊
                color: 'rgba(255, 215, 0, 0.3)',   // 降低透明度
            },
        },
    },

    // ========== 定位配置 ==========
    position: {
        // 顶部位置（CSS 值）
        // 用途：控制标题距离页面顶部的距离
        // 影响：使用 clamp 确保在不同屏幕尺寸下都有合适的边距
        top: 'clamp(1rem, 4vh, 2rem)',

        // 左侧位置（CSS 值）
        // 用途：控制标题距离页面左侧的距离
        // 影响：使用 clamp 确保响应式布局
        left: 'clamp(1rem, 3vw, 2.5rem)',
    },

    // ========== 过渡动画配置 ==========
    transition: {
        // 爆炸状态过渡时长（秒）
        // 用途：控制标题进入爆炸状态的动画时长
        // 影响：值越大过渡越平缓
        explodedDuration: 2.5,

        // 正常状态过渡时长（秒）
        // 用途：控制标题恢复正常状态的动画时长
        // 影响：值越大过渡越平缓
        normalDuration: 0.8,
    },
} as const;
